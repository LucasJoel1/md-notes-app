<template>
    <div class="editorContainer" id="editorContainer">
        <div id="editorLines" class="editorLines">
            <div class="editorLines-line">1</div>
            <div class="editorLines-line">2</div>
            <div class="editorLines-line">3</div>
            <div class="editorLines-line">4</div>
            <div class="editorLines-line">5</div>
            <div class="editorLines-line">6</div>
            <div class="editorLines-line">7</div>
            <div class="editorLines-line">8</div>
            <div class="editorLines-line">9</div>
            <div class="editorLines-line">10</div>
            <div class="editorLines-line">11</div>
            <div class="editorLines-line">12</div>
            <div class="editorLines-line">13</div>
            <div class="editorLines-line">14</div>
            <div class="editorLines-line">15</div>
            <div class="editorLines-line">16</div>
            <div class="editorLines-line">17</div>
            <div class="editorLines-line">18</div>
            <div class="editorLines-line">19</div>
            <div class="editorLines-line">20</div>
            <div class="editorLines-line">21</div>
            <div class="editorLines-line">22</div>
            <div class="editorLines-line">23</div>
            <div class="editorLines-line">24</div>
            <div class="editorLines-line">25</div>
            <div class="editorLines-line">26</div>
            <div class="editorLines-line">27</div>
            <div class="editorLines-line">28</div>
            <div class="editorLines-line">29</div>
            <div class="editorLines-line">30</div>
            <div class="editorLines-line">31</div>
            <div class="editorLines-line">32</div>
            <div class="editorLines-line">33</div>
            <div class="editorLines-line">34</div>
            <div class="editorLines-line">35</div>
            <div class="editorLines-line">36</div>
            <div class="editorLines-line">37</div>
            <div class="editorLines-line">38</div>
            <div class="editorLines-line">39</div>
            <div class="editorLines-line">40</div>
            <div class="editorLines-line">41</div>
            <div class="editorLines-line">42</div>
            <div class="editorLines-line">43</div>
            <div class="editorLines-line">44</div>
            <div class="editorLines-line">45</div>
            <div class="editorLines-line">46</div>
            <div class="editorLines-line">47</div>
            <div class="editorLines-line">48</div>
            <div class="editorLines-line">49</div>
            <div class="editorLines-line">50</div>
            <div class="editorLines-line">51</div>
            <div class="editorLines-line">52</div>
            <div class="editorLines-line">53</div>
            <div class="editorLines-line">54</div>
            <div class="editorLines-line">55</div>
            <div class="editorLines-line">56</div>
            <div class="editorLines-line">57</div>
            <div class="editorLines-line">58</div>
            <div class="editorLines-line">59</div>
            <div class="editorLines-line">60</div>
            <div class="editorLines-line">61</div>
            <div class="editorLines-line">62</div>
            <div class="editorLines-line">63</div>
            <div class="editorLines-line">64</div>
            <div class="editorLines-line">65</div>
            <div class="editorLines-line">66</div>
            <div class="editorLines-line">67</div>
            <div class="editorLines-line">68</div>
            <div class="editorLines-line">69</div>
            <div class="editorLines-line">70</div>
            <div class="editorLines-line">71</div>
            <div class="editorLines-line">72</div>
            <div class="editorLines-line">73</div>
            <div class="editorLines-line">74</div>
            <div class="editorLines-line">75</div>
            <div class="editorLines-line">76</div>
            <div class="editorLines-line">77</div>
            <div class="editorLines-line">78</div>
            <div class="editorLines-line">79</div>
            <div class="editorLines-line">80</div>
            <div class="editorLines-line">81</div>
            <div class="editorLines-line">82</div>
            <div class="editorLines-line">83</div>
            <div class="editorLines-line">84</div>
            <div class="editorLines-line">85</div>
            <div class="editorLines-line">86</div>
            <div class="editorLines-line">87</div>
            <div class="editorLines-line">88</div>
            <div class="editorLines-line">89</div>
            <div class="editorLines-line">90</div>
            <div class="editorLines-line">91</div>
            <div class="editorLines-line">92</div>
            <div class="editorLines-line">93</div>
            <div class="editorLines-line">94</div>
            <div class="editorLines-line">95</div>
            <div class="editorLines-line">96</div>
            <div class="editorLines-line">97</div>
            <div class="editorLines-line">98</div>
            <div class="editorLines-line">99</div>
            <div class="editorLines-line">100</div>
            <div class="editorLines-line">101</div>
            <div class="editorLines-line">102</div>
            <div class="editorLines-line">103</div>
            <div class="editorLines-line">104</div>
            <div class="editorLines-line">105</div>
            <div class="editorLines-line">106</div>
            <div class="editorLines-line">107</div>
            <div class="editorLines-line">108</div>
            <div class="editorLines-line">109</div>
            <div class="editorLines-line">110</div>
            <div class="editorLines-line">111</div>
            <div class="editorLines-line">112</div>
            <div class="editorLines-line">113</div>
            <div class="editorLines-line">114</div>
            <div class="editorLines-line">115</div>
            <div class="editorLines-line">116</div>
            <div class="editorLines-line">117</div>
            <div class="editorLines-line">118</div>
            <div class="editorLines-line">119</div>
            <div class="editorLines-line">120</div>
            <div class="editorLines-line">121</div>
            <div class="editorLines-line">122</div>
            <div class="editorLines-line">123</div>
            <div class="editorLines-line">124</div>
            <div class="editorLines-line">125</div>
            <div class="editorLines-line">126</div>
            <div class="editorLines-line">127</div>
            <div class="editorLines-line">128</div>
            <div class="editorLines-line">129</div>
            <div class="editorLines-line">130</div>
            <div class="editorLines-line">131</div>
            <div class="editorLines-line">132</div>
            <div class="editorLines-line">133</div>
            <div class="editorLines-line">134</div>
            <div class="editorLines-line">135</div>
            <div class="editorLines-line">136</div>
            <div class="editorLines-line">137</div>
            <div class="editorLines-line">138</div>
            <div class="editorLines-line">139</div>
            <div class="editorLines-line">140</div>
            <div class="editorLines-line">141</div>
            <div class="editorLines-line">142</div>
            <div class="editorLines-line">143</div>
            <div class="editorLines-line">144</div>
            <div class="editorLines-line">145</div>
            <div class="editorLines-line">146</div>
            <div class="editorLines-line">147</div>
            <div class="editorLines-line">148</div>
            <div class="editorLines-line">149</div>
            <div class="editorLines-line">150</div>
            <div class="editorLines-line">151</div>
            <div class="editorLines-line">152</div>
            <div class="editorLines-line">153</div>
            <div class="editorLines-line">154</div>
            <div class="editorLines-line">155</div>
            <div class="editorLines-line">156</div>
            <div class="editorLines-line">157</div>
            <div class="editorLines-line">158</div>
            <div class="editorLines-line">159</div>
            <div class="editorLines-line">160</div>
            <div class="editorLines-line">161</div>
            <div class="editorLines-line">162</div>
            <div class="editorLines-line">163</div>
            <div class="editorLines-line">164</div>
            <div class="editorLines-line">165</div>
            <div class="editorLines-line">166</div>
            <div class="editorLines-line">167</div>
            <div class="editorLines-line">168</div>
            <div class="editorLines-line">169</div>
            <div class="editorLines-line">170</div>
            <div class="editorLines-line">171</div>
            <div class="editorLines-line">172</div>
            <div class="editorLines-line">173</div>
            <div class="editorLines-line">174</div>
            <div class="editorLines-line">175</div>
            <div class="editorLines-line">176</div>
            <div class="editorLines-line">177</div>
            <div class="editorLines-line">178</div>
            <div class="editorLines-line">179</div>
            <div class="editorLines-line">180</div>
            <div class="editorLines-line">181</div>
            <div class="editorLines-line">182</div>
            <div class="editorLines-line">183</div>
            <div class="editorLines-line">184</div>
            <div class="editorLines-line">185</div>
            <div class="editorLines-line">186</div>
            <div class="editorLines-line">187</div>
            <div class="editorLines-line">188</div>
            <div class="editorLines-line">189</div>
            <div class="editorLines-line">190</div>
            <div class="editorLines-line">191</div>
            <div class="editorLines-line">192</div>
            <div class="editorLines-line">193</div>
            <div class="editorLines-line">194</div>
            <div class="editorLines-line">195</div>
            <div class="editorLines-line">196</div>
            <div class="editorLines-line">197</div>
            <div class="editorLines-line">198</div>
            <div class="editorLines-line">199</div>
            <div class="editorLines-line">200</div>
        </div>
        <div class="editor" id="editor">
            <div class="editor-header-syntax"># Hello</div>
            <br>
            <div class="editor-text-syntax">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sed voluptates ab optio tempora, quos sequi nisi quisquam facere provident esse neque amet, asperiores dolores aspernatur, obcaecati fugiat illum vel quibusdam?</div>
        </div>
    </div>
</template>

<script>
    export default {
        mounted() {
            let editor = document.getElementById("editor");
            let lines = document.getElementById("editorLines");
            let line = 0;
            let char = 0;
            editor.style.height = lines.childNodes.length * 20 + 'px'

            function insertNewLine() {
                let index = lines.childNodes.length
                let newElem = document.createElement("div");
                newElem.classList = "editorLines-line"
                newElem.innerHTML = parseInt(index) + 1
                lines.appendChild(newElem)
                editor.style.height = lines.childNodes.length * 20 + 'px'
                newElem.scrollIntoView({ behavior: 'smooth', block: 'end' });       
            }

            function removePreviousLine() {
                if (lines.childNodes.length > 1) {
                    lines.removeChild(lines.lastChild)
                    editor.style.height = lines.childNodes.length * 20 + 'px'       
                }
            }

            document.addEventListener("keydown", (e) => {
                if (e.key == "Enter") {
                    insertNewLine()
                } else if (e.key == "Backspace") {
                    removePreviousLine()
                }
            })

            window.insertNewLine = insertNewLine;
            window.removePreviousLine = removePreviousLine;

        }
    }
</script>